<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘ç«™è®¿é—®é‡å®šå‘ - Umamiç»Ÿè®¡é›†æˆ</title>
    <!-- Umami ç»Ÿè®¡åˆ†æè„šæœ¬ - å¿…é¡»åœ¨æ ¹é¡µé¢æ‰§è¡Œ -->
    <script defer src="https://cloud.umami.is/script.js" data-website-id="0a3ec395-5346-4f0d-9144-631459149fb5"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2980 0%, #26d0ce 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            color: white;
        }
        
        .container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            max-width: 700px;
            width: 100%;
            animation: fadeIn 0.8s ease-out;
            color: #333;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h1 {
            color: #1a2980;
            margin-bottom: 15px;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .subtitle {
            color: #26d0ce;
            font-size: 1.2rem;
            margin-bottom: 30px;
            font-weight: 500;
        }
        
        .info-box {
            background-color: #f0f9ff;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #1a2980;
            text-align: left;
        }
        
        .info-box h3 {
            color: #1a2980;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-box h3::before {
            content: "ğŸ“Š";
        }
        
        .umami-highlight {
            background-color: #e8f4fc;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            border: 1px dashed #1a2980;
        }
        
        .path-display {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 12px 20px;
            border-radius: 10px;
            display: inline-block;
            margin: 15px 0;
            font-size: 1.2rem;
            word-break: break-all;
        }
        
        .loader-container {
            margin: 30px 0;
        }
        
        .loader {
            width: 60px;
            height: 60px;
            border: 6px solid #f3f3f3;
            border-top: 6px solid #26d0ce;
            border-radius: 50%;
            animation: spin 1.5s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .countdown {
            font-size: 1.5rem;
            font-weight: 700;
            color: #e74c3c;
            margin: 20px 0;
        }
        
        .redirect-note {
            background-color: #fff8e1;
            border-radius: 10px;
            padding: 15px;
            margin: 25px 0;
            color: #8a6d3b;
            font-size: 0.95rem;
            border-left: 4px solid #ffc107;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(to right, #1a2980, #26d0ce);
            color: white;
            text-decoration: none;
            padding: 15px 35px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(26, 41, 128, 0.3);
            border: none;
            cursor: pointer;
            margin-top: 15px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(26, 41, 128, 0.4);
        }
        
        .footer {
            margin-top: 40px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
        }
        
        .visitor-count {
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            margin-left: 10px;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .path-display {
                font-size: 1rem;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ç½‘ç«™è®¿é—®é‡å®šå‘</h1>
        <div class="subtitle">Umamiç»Ÿè®¡é›†æˆç³»ç»Ÿ</div>
        
        <div class="info-box">
            <h3>ç»Ÿè®¡ä»£ç æ‰§è¡Œä¸­</h3>
            <p>ä¸ºç¡®ä¿ç½‘ç«™è®¿é—®æ•°æ®è¢«å‡†ç¡®ç»Ÿè®¡ï¼Œæ‰€æœ‰è®¿é—®è¯·æ±‚éƒ½éœ€è¦ç»è¿‡æœ¬é¡µé¢æ‰§è¡ŒUmamiç»Ÿè®¡è„šæœ¬ã€‚</p>
            <div class="umami-highlight">
                <p><strong>Umamiç»Ÿè®¡ID:</strong> 0a3ec395-5346-4f0d-9144-631459149fb5</p>
                <p><strong>çŠ¶æ€:</strong> <span id="umamiStatus">æ­£åœ¨åŠ è½½ç»Ÿè®¡è„šæœ¬...</span></p>
            </div>
        </div>
        
        <p>æ‚¨å³å°†è¢«é‡å®šå‘åˆ°ç›®æ ‡é¡µé¢ï¼š</p>
        <div class="path-display" id="targetPath">/gp-simanager/index.html</div>
        
        <div class="redirect-note">
            <p><strong>æ³¨æ„ï¼š</strong>æ­¤é‡å®šå‘æœºåˆ¶ç¡®ä¿Umamiç»Ÿè®¡èƒ½æ­£ç¡®è®°å½•æ‰€æœ‰è®¿é—®ï¼Œæ— è®ºç”¨æˆ·ç›´æ¥è®¿é—®å“ªä¸ªURLã€‚</p>
        </div>
        
        <div class="loader-container">
            <div class="loader"></div>
        </div>
        
        <div class="countdown" id="countdown">5ç§’åè‡ªåŠ¨è·³è½¬</div>
        
        <div>
            <button class="btn" id="manualRedirect">ç«‹å³è·³è½¬</button>
        </div>
    </div>
    
    <div class="footer">
        <p>Â© 2026 ç½‘ç«™ç®¡ç†ç³»ç»Ÿ | è®¿é—®ç»Ÿè®¡ç”±Umamiæä¾› | å½“å‰è®¿é—®è€…<span class="visitor-count" id="visitorCount">--</span></p>
    </div>

    <script>
        // é…ç½®å‚æ•°
        const TARGET_URL = "/gp-simanager/index.html";
        const REDIRECT_DELAY = 3000; // 3ç§’åè·³è½¬ï¼ˆç¡®ä¿Umamiæœ‰è¶³å¤Ÿæ—¶é—´åŠ è½½ï¼‰
        const FALLBACK_DELAY = 5000; // å¤‡ç”¨è·³è½¬æ—¶é—´ï¼ˆ5ç§’ï¼‰
        
        // è·å–å½“å‰è®¿é—®è·¯å¾„
        const currentPath = window.location.pathname;
        const urlParams = new URLSearchParams(window.location.search);
        const originalTarget = urlParams.get('target') || TARGET_URL;
        
        // æ›´æ–°æ˜¾ç¤ºçš„ç›®æ ‡è·¯å¾„
        document.getElementById('targetPath').textContent = originalTarget;
        
        let countdown = REDIRECT_DELAY / 1000;
        let countdownInterval;
        let umamiLoaded = false;
        
        // æ£€æŸ¥Umamiæ˜¯å¦åŠ è½½æˆåŠŸ
        function checkUmamiLoaded() {
            if (window.umami && typeof window.umami.trackView === 'function') {
                umamiLoaded = true;
                document.getElementById('umamiStatus').textContent = 'ç»Ÿè®¡è„šæœ¬å·²åŠ è½½';
                document.getElementById('umamiStatus').style.color = '#27ae60';
                
                // è®°å½•å½“å‰é¡µé¢è®¿é—®
                try {
                    umami.trackView(currentPath, "https://" + window.location.hostname);
                } catch (e) {
                    console.log("Umami trackView error:", e);
                }
            } else {
                setTimeout(checkUmamiLoaded, 500);
            }
        }
        
        // å¯åŠ¨Umamiæ£€æŸ¥
        setTimeout(checkUmamiLoaded, 1000);
        
        // æ‰§è¡Œé‡å®šå‘å‡½æ•°
        function performRedirect() {
            // æ¸…é™¤å€’è®¡æ—¶
            if (countdownInterval) clearInterval(countdownInterval);
            
            // æ˜¾ç¤ºè·³è½¬çŠ¶æ€
            document.getElementById('countdown').textContent = "æ­£åœ¨è·³è½¬...";
            document.getElementById('countdown').style.color = "#27ae60";
            
            // æ·»åŠ ä¸€ä¸ªå°çš„å»¶è¿Ÿï¼Œç¡®ä¿Umamiæœ‰è¶³å¤Ÿæ—¶é—´å‘é€æ•°æ®
            setTimeout(() => {
                window.location.href = originalTarget;
            }, 300);
        }
        
        // è®¾ç½®å€’è®¡æ—¶
        function startCountdown() {
            const countdownElement = document.getElementById('countdown');
            countdownElement.textContent = `${countdown}ç§’åè‡ªåŠ¨è·³è½¬`;
            
            countdownInterval = setInterval(() => {
                countdown--;
                if (countdown <= 0) {
                    performRedirect();
                } else {
                    countdownElement.textContent = `${countdown}ç§’åè‡ªåŠ¨è·³è½¬`;
                }
            }, 1000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹å€’è®¡æ—¶
        window.addEventListener('load', function() {
            // ç­‰å¾…ä¸€å°æ®µæ—¶é—´ç¡®ä¿Umamiå¼€å§‹åŠ è½½
            setTimeout(() => {
                startCountdown();
                
                // å¤‡ç”¨é‡å®šå‘æœºåˆ¶ï¼ˆç¡®ä¿å³ä½¿UmamiåŠ è½½æœ‰é—®é¢˜ä¹Ÿèƒ½è·³è½¬ï¼‰
                setTimeout(performRedirect, FALLBACK_DELAY);
            }, 1000);
        });
        
        // ä¸ºæ‰‹åŠ¨è·³è½¬æŒ‰é’®æ·»åŠ äº‹ä»¶
        document.getElementById('manualRedirect').addEventListener('click', performRedirect);
        
        // å¦‚æœç”¨æˆ·ç›´æ¥è®¿é—®äº†ç›®æ ‡é¡µé¢ï¼Œä¹Ÿé‡å®šå‘å›æ ¹é¡µé¢
        // è¿™å¯ä»¥é˜²æ­¢ç”¨æˆ·ç»•è¿‡ç»Ÿè®¡
        if (currentPath === TARGET_URL || currentPath === '/gp-simanager/') {
            // é‡å®šå‘åˆ°æ ¹é¡µé¢å¹¶ä¼ é€’ç›®æ ‡å‚æ•°
            window.location.href = "/?target=" + encodeURIComponent(TARGET_URL);
        }
        
        
        // åˆå§‹æ›´æ–°å’Œå®šæ—¶æ›´æ–°
        updateVisitorCount();
        setInterval(updateVisitorCount, 10000);
    </script>
</body>
</html>
